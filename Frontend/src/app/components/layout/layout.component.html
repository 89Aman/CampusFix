<div class="min-h-screen font-sans flex flex-col transition-colors duration-200"
    [ngClass]="{'bg-slate-900 text-white': isDarkMode, 'bg-slate-50 text-slate-900': !isDarkMode}">
    <!-- Header -->
    <header
        class="h-16 border-b flex items-center justify-between px-6 fixed w-full top-0 z-50 transition-colors duration-200"
        [ngClass]="{'border-slate-800 bg-slate-900': isDarkMode, 'border-slate-200 bg-white': !isDarkMode}">
        <div class="flex items-center gap-2">
            <a routerLink="/" class="text-blue-500 font-bold text-xl tracking-tight cursor-pointer">CampusFix</a>
        </div>

        <div class="flex items-center gap-6">
            <!-- Theme Toggle -->
            <button (click)="toggleTheme()" class="transition-colors p-2 rounded-full hover:bg-slate-800/50"
                [ngClass]="{'text-slate-400 hover:text-white': isDarkMode, 'text-slate-500 hover:text-slate-900 hover:bg-slate-100': !isDarkMode}"
                aria-label="Toggle theme">
                <!-- Moon icon for Dark Mode (shows when dark is active, to indicate current state, or Sun to switch to light? Usually opposite or current state. Let's show Sun if dark (to switch to light) or Moon if light. Or just the icon representing the mode.) -->
                <!-- Let's imply: Click to switch. If Dark, show Sun (to switch to light). If Light, show Moon (to switch to dark). -->
                <svg *ngIf="isDarkMode" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5" />
                    <path
                        d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                </svg>
                <svg *ngIf="!isDarkMode" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
                </svg>
            </button>

            <!-- Auth (Not Logged In) -->
            <a *ngIf="!(user$ | async)" routerLink="/login"
                class="text-sm font-medium transition-colors px-4 py-2 rounded-md border"
                [ngClass]="{'text-slate-300 hover:text-white bg-slate-800 hover:bg-slate-700 border-slate-700': isDarkMode, 'text-slate-600 hover:text-slate-900 bg-white hover:bg-slate-50 border-slate-200': !isDarkMode}">
                Sign In
            </a>

            <!-- User Profile & Logout (Logged In) -->
            <div *ngIf="user$ | async as user" class="flex items-center gap-6">
                <!-- User Profile -->
                <button class="transition-colors flex items-center gap-2"
                    [ngClass]="{'text-slate-400 hover:text-white': isDarkMode, 'text-slate-500 hover:text-slate-900': !isDarkMode}"
                    aria-label="Profile">
                    <img *ngIf="user.picture" [src]="user.picture" class="w-8 h-8 rounded-full border border-slate-600">
                    <span *ngIf="!user.picture"
                        class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold"
                        [ngClass]="{'bg-slate-700': isDarkMode, 'bg-slate-200 text-slate-700': !isDarkMode}">
                        {{ user.name.charAt(0) }}
                    </span>
                </button>

                <!-- Logout -->
                <button (click)="logout()" class="flex items-center gap-2 transition-colors text-sm font-medium"
                    [ngClass]="{'text-slate-400 hover:text-white': isDarkMode, 'text-slate-500 hover:text-slate-900': !isDarkMode}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" x2="9" y1="12" y2="12" />
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 mt-16 p-6 flex justify-center">
        <router-outlet></router-outlet>
    </main>
</div>